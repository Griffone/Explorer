(()=>{"use strict";var t={367:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resetConfigs=void 0;const a=i(49);var s=[];function h(t,e){let i=Number(t.min),a=Number(t.max),h=Number(t.value);s.push(t);let n=()=>{let s=Number(t.value);""===t.value&&(s=h,t.value=s.toString()),s<i?(s=i,t.value=s.toString()):s>a&&(s=a,t.value=s.toString()),s>=i&&s<=a&&e(s)};t.addEventListener("input",n),t.addEventListener("change",n)}e.resetConfigs=function(){s.forEach((t=>{t.value="";let e=document.createEvent("Event");e.initEvent("input"),t.dispatchEvent(e)}))},h(document.getElementById("limit"),(t=>{a.mandelConfig.limit,a.mandelConfig.limit=t})),h(document.getElementById("escaper"),(t=>{a.mandelConfig.escapeRadius,a.mandelConfig.escapeRadius=t}))},49:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mandelConfig=e.mandel=void 0;const a=i(311),s=i(740);let h=0,n=0,c=1,l=[],r=[],o=[],d=[],u={limit:30,escapeRadius:2};e.mandelConfig=u;let g=1,m=new DOMRect;function p(t){h==t.x&&n==t.y||M.pan(Math.round(t.x-h),Math.round(t.y-n)),h=t.x,n=t.y}function w(t){if(p(t),t.scale!=c){f();let e=c/t.scale;g/=e,M.zoom(t.x,t.y,e)}c=t.scale}function v(){return r.pop()||new Uint8ClampedArray(M.tileWidth*M.tileHeight*4)}function f(){for(var t=0;t<d.length;++t)d[t].rejectCb();d.length=0}function x(t){l[t][0].onmessage=e=>{let i=new Uint8ClampedArray(e.data.pixels),a=new ImageData(i,e.data.tile.width,e.data.tile.height);l[t][1](a),queueMicrotask((()=>{let e=d.shift();if(null!=e){let i=l[t];i[1]=e.resolveCb,i[2]=e.rejectCb,m.x=e.x*m.width,m.y=e.y*m.height;let a=v();i[0].postMessage({pixels:a.buffer,tile:m,zoom:g,config:u},[a.buffer])}else o.push(t)}))}}for(var y=0;y<1;++y)l.push([new Worker("./cdw.js"),()=>{},()=>{}]),x(y),o.push(y);let b=document.getElementById("canvas");b.width=window.innerWidth,b.height=window.innerHeight;let M=new a.default(b,((t,e)=>new Promise(((i,a)=>function(t){let e=o.pop();if(null!=e){let[i]=l[e];l[e][1]=t.resolveCb,l[e][2]=t.rejectCb,m.x=t.x*m.width,m.y=t.y*m.height;let a=v();i.postMessage({pixels:a.buffer,tile:m,zoom:g,config:u},[a.buffer])}else d.push(t)}({x:t,y:e,resolveCb:i,rejectCb:a})))));e.mandel=M,m.width=M.tileWidth,m.height=M.tileHeight,g=b.width>=b.height?b.width/2:b.height/2,M.pan(Math.round(b.width/2),Math.round(b.height/2)),window.addEventListener("resize",(()=>M.resize(window.innerWidth,window.innerHeight)));let D=new s.GestureDecoder(b);D.on("dragstart",(t=>{h=t.x,n=t.y})),D.on("dragupdate",p),D.on("dragstop",p),D.on("zoomstart",(t=>{h=t.x,n=t.y,c=t.scale})),D.on("zoomupdate",w),D.on("zoomstop",w),b.addEventListener("wheel",(t=>{f();let e=1+.001*t.deltaY;g/=e,M.zoom(t.clientX,t.clientY,e)})),M.resize(window.innerWidth,window.innerHeight)},311:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i=0,a=0,s=64,h=64){this.tiles=new Map,this.canvas=t,this.context=t.getContext("2d",{alpha:!1}),this.tw=s,this.th=h,this.requestTileCb=e,this.x=i,this.y=a}get defaultViewport(){if(this.canvas.width>=this.canvas.height){let t=this.canvas.width/this.canvas.height;return new DOMRect(-t,-1,2*t,2)}{let t=this.canvas.height/this.canvas.width;return new DOMRect(-1,-t,2,2*t)}}get tileWidth(){return this.tw}get tileHeight(){return this.th}draw(){let t=Math.floor(this.x/this.tw),e=t+Math.ceil(this.canvas.width/this.tw),i=Math.floor(this.y/this.th),a=i+Math.ceil(this.canvas.height/this.th);for(var s=i;s<a;++s)for(var h=t;h<e;++h)this.requestTile(h,s)}clearCachedTiles(t){null!=t&&this.tiles.forEach((e=>e.then((e=>{e&&t(e)})))),this.tiles.clear()}pan(t,e){let i=t>=0?t:this.canvas.width+t,a=e>=0?e:this.canvas.height+e,s=[];if(s=[new DOMRect(0,0,i,a),new DOMRect(i,0,this.canvas.width-i,a),new DOMRect(0,a,i,this.canvas.height-a),new DOMRect(i,a,this.canvas.width-i,this.canvas.height-a)],t<0&&e<0){let i=this.context.getImageData(-t,-e,s[0].width,s[0].height);this.context.putImageData(i,0,0)}else if(t>=0&&e<0){let i=this.context.getImageData(0,-e,s[1].width,s[1].height);this.context.putImageData(i,t,0)}else if(t<0&&e>=0){let i=this.context.getImageData(-t,0,s[2].width,s[2].height);this.context.putImageData(i,0,e)}else if(t>=0&&e>=0){let i=this.context.getImageData(0,0,s[3].width,s[3].height);this.context.putImageData(i,t,e)}this.x-=t,this.y-=e,this.draw()}zoom(t,e,i){if(this.canvas.width,this.canvas.height,i>1){let a=1/i,s=t*(1-a),h=e*(1-a);this.context.drawImage(this.canvas,s,h,this.canvas.width*a,this.canvas.height*a),this.x+=Math.round(s),this.y+=Math.round(h)}else{let a=t*(1-i),s=e*(1-i);this.context.drawImage(this.canvas,a,s,this.canvas.width*i,this.canvas.height*i,0,0,this.canvas.width,this.canvas.height),this.x+=Math.round(a),this.y+=Math.round(s)}this.clearCachedTiles(),this.draw()}resize(t,e){let i=this.context.fillStyle;this.canvas.width=t,this.canvas.height=e,this.context.fillStyle=i,this.draw()}requestTile(t,e){let i=`${t}|${e}`,a=this.tiles.get(i)||this.requestTileCb(t,e);a=a.then((i=>(null!=i&&this.context.putImageData(i,t*this.tw-this.x,e*this.th-this.y),i)),(()=>{this.tiles.delete(i)})),this.tiles.set(i,a)}}},740:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GestureDecoder=void 0,e.GestureDecoder=class{constructor(t){this.cache=[],this.x=0,this.y=0,this.delta=0,t.addEventListener("pointerdown",this.handlePointerDown.bind(this)),t.addEventListener("pointermove",this.handlePointerMove.bind(this)),t.addEventListener("pointerup",this.handlePointerUp.bind(this)),t.addEventListener("pointercancel",this.handlePointerUp.bind(this)),t.addEventListener("pointerout",this.handlePointerUp.bind(this)),t.addEventListener("pointerleave",this.handlePointerUp.bind(this))}on(t,e){switch(t){case"dragstart":this.dragStartHandler=e;break;case"dragupdate":this.dragUpdateHandler=e;break;case"dragstop":this.dragStopHandler=e;break;case"zoomstart":this.zoomStartHandler=e;break;case"zoomupdate":this.zoomUpdateHandler=e;break;case"zoomstop":this.zoomStopHandler=e}}handlePointerDown(t){switch(this.cache.push(t),this.cache.length){case 1:this.startDrag();break;case 2:this.stopDrag(),this.startZoom();break;case 3:this.stopZoom()}}handlePointerMove(t){for(var e=0;e<this.cache.length;++e)if(this.cache[e].pointerId==t.pointerId){this.cache[e]=t;break}switch(this.cache.length){case 1:this.updateDrag();break;case 2:this.updateZoom()}}handlePointerUp(t){let e=!1;switch(this.cache.length){case 1:this.stopDrag();break;case 2:this.stopZoom(),e=!0;break;case 3:this.startZoom()}for(var i=0;i<this.cache.length;++i)if(this.cache[i].pointerId==t.pointerId){this.cache.splice(i,1);break}e&&this.startDrag()}startDrag(){this.x=this.cache[0].clientX,this.y=this.cache[0].clientY,null!=this.dragStartHandler&&this.dragStartHandler({x:this.cache[0].clientX-this.x,y:this.cache[0].clientY-this.y})}updateDrag(){null!=this.dragUpdateHandler&&this.dragUpdateHandler({x:this.cache[0].clientX-this.x,y:this.cache[0].clientY-this.y})}stopDrag(){null!=this.dragStopHandler&&this.dragStopHandler({x:this.cache[0].clientX-this.x,y:this.cache[0].clientY-this.y})}startZoom(){let t=this.cache[0].clientX-this.cache[1].clientX,e=this.cache[0].clientY-this.cache[1].clientY;if(this.delta=Math.sqrt(t*t+e*e),null!=this.zoomStartHandler){let t=(this.cache[0].clientX+this.cache[1].clientX)/2,e=(this.cache[0].clientY+this.cache[1].clientY)/2;this.zoomStartHandler({x:t,y:e,scale:1})}}updateZoom(){if(null!=this.zoomUpdateHandler){let t=(this.cache[0].clientX+this.cache[1].clientX)/2,e=(this.cache[0].clientY+this.cache[1].clientY)/2,i=this.cache[0].clientX-this.cache[1].clientX,a=this.cache[0].clientY-this.cache[1].clientY,s=Math.sqrt(i*i+a*a);this.zoomUpdateHandler({x:t,y:e,scale:s/this.delta})}}stopZoom(){if(null!=this.zoomStopHandler){let t=(this.cache[0].clientX+this.cache[1].clientX)/2,e=(this.cache[0].clientY+this.cache[1].clientY)/2,i=this.cache[0].clientX-this.cache[1].clientX,a=this.cache[0].clientY-this.cache[1].clientY,s=Math.sqrt(i*i+a*a);this.zoomStopHandler({x:t,y:e,scale:s/this.delta})}}}}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var h=e[a]={exports:{}};return t[a](h,h.exports,i),h.exports}(()=>{const t=i(49),e=i(367);let a=document.getElementById("side-menu"),s=document.getElementById("toggle-menu"),h=document.getElementById("toggle-menu-arrow");s.addEventListener("click",(function(){"280pt"===a.style.width?(a.style.width="0",s.style.marginRight="20pt",h.classList.remove("right"),h.classList.add("left")):(a.style.width="280pt",a.getBoundingClientRect().width,s.style.marginRight="300pt",h.classList.remove("left"),h.classList.add("right"))})),document.getElementById("redraw").onclick=()=>t.mandel.draw(),document.getElementById("reset").onclick=()=>{e.resetConfigs(),t.mandel.clearCachedTiles(),t.mandel.draw()}})(),(()=>{let t=document.getElementById("toggle_fs");document.fullscreenEnabled?t.onclick=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}:t.remove()})()})();